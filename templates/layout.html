{% extends "document.html" %}

{% block body %}
  <section class="container-fluid">
    <div class="row flex-nowrap">
      <aside id="sidebar" class="col-12 px-0 sidebar">
        <div class="row mx-0 flex-column h-100">
          <nav class="col-auto py-2" aria-label="Sidebar navigation">
            <div class="row flex-nowrap justify-content-between align-items-center">
              <section class="col-auto h4 m-0"><span class="brand">TechNote</span></section>
              <section class="col-auto px-0">
                <button class="btn text-reset" type="button" data-target="sidebar" data-make-hidden="true" aria-controls="sidebar">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-layout-sidebar-inset" viewBox="0 0 16 16">
                    <path d="M14 2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1zM2 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2z"/>
                    <path d="M3 4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1z"/>
                  </svg>
                </button>
              </section>
            </div>
          </nav>
          <nav class="col py-2 overflow-auto" aria-label="Notes">
            <ul class="ps-4 pe-3 py-2">
              {% for directory, notes in grouped_notes %}
                <li class="py-2">
                  <span class="list-title">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-folder" viewBox="0 0 16 16">
                      <path d="M.54 3.87.5 3a2 2 0 0 1 2-2h3.672a2 2 0 0 1 1.414.586l.828.828A2 2 0 0 0 9.828 3h3.982a2 2 0 0 1 1.992 2.181l-.637 7A2 2 0 0 1 13.174 14H2.826a2 2 0 0 1-1.991-1.819l-.637-7a2 2 0 0 1 .342-1.31zM2.19 4a1 1 0 0 0-.996 1.09l.637 7a1 1 0 0 0 .995.91h10.348a1 1 0 0 0 .995-.91l.637-7A1 1 0 0 0 13.81 4zm4.69-1.707A1 1 0 0 0 6.172 2H2.5a1 1 0 0 0-1 .981l.006.139q.323-.119.684-.12h5.396z"/>
                    </svg>
                    <strong class="my-0 ms-2">{{ directory }}</strong>
                  </span>
                  <ul class="ps-3 py-2">
                    {% for note in notes %}
                      <li>
                        <a href="{{ url_for('note', note_id=note.id) }}" title="{{ note.path }}">{{ note.name }}</a>
                      </li>
                    {% endfor %}
                  </ul>
                </li>
              {% endfor %}
            </ul>
          </nav>
        </div>
      </aside>
      <section class="col min-vh-100 min-width-0">
        <div class="row flex-column flex-nowrap h-100">
          <header class="col-auto py-3">
            <nav class="row justify-content-between" aria-label="Top bar navigation">
              <div class="col-auto p-0 px-md-3">
                <button id="headerSidebarBtn" class="btn text-reset" type="button" data-target="sidebar" aria-controls="sidebar">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-layout-sidebar-inset" viewBox="0 0 16 16">
                    <path d="M14 2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1zM2 1a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2z"/>
                    <path d="M3 4a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1z"/>
                  </svg>
                </button>
              </div>
              <div class="col col-md-6 p-0">
                {% include "search_box.html" %}
              </div>
              <div class="col-auto p-0 px-md-3">
                <button id="noteCreatorBtn" class="btn text-reset" type="button" data-editor-id="noteCreator">
                  <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor" class="bi bi-plus-square" viewBox="0 0 16 16">
                    <path d="M14 1a1 1 0 0 1 1 1v12a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1zM2 0a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V2a2 2 0 0 0-2-2z"/>
                    <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"/>
                  </svg>
                </button>
              </div>
            </nav>
          </header>
          <main class="col px-3 px-md-5" role="main">
            {% block content %}{% endblock %}
          </main>
        </div>
      </section>
    </div>
  </section>
  {% include "note_editor.html" %}
{% endblock %}
